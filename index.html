<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<body style="background-color: black;">
    <style>
        .calculator{
            background-color: black;
        }
        button {
        border-radius: 30px !important;
        padding-left: 25px;
        padding-right: 22px;
        padding-top: 15px;
        padding-bottom: 20px;
        background-color: rgb(255, 115, 0);
        border: none;
        margin-top: 5px;
        color: white;
    }
    button:hover{
        background-color: rgb(234, 119, 52);
    }

    .num{
        border-radius: 30px !important;
        padding-left: 25px;
        padding-right: 22px;
        padding-top: 15px;
        padding-bottom: 20px;
        background-color: rgb(75, 74, 73);
        border: none;
        margin-top: 5px;
        color: white;
    }
    .num:hover{
        background-color: rgb(118, 114, 108);
    }

    .symb{
        border-radius: 30px !important;
        padding-left: 25px;
        padding-right: 22px;
        padding-top: 15px;
        padding-bottom: 20px;
        background-color: rgb(222, 216, 210);
        border: none;
        margin-top: 5px;
        color: black;
    }
    .symb:hover{
        background-color: rgb(252, 248, 243);
    }
    input{
        color: white;
        border: 1px solid #fff;
    }
    </style>
    
    <div class="container d-flex flex-column jusitfy-content-center align-items-center vh-100">

    <div class="calculator m-5" style="width: 400px;">
        <div class="input p-5 m-4">
            <input type="text" class="py-2" id="calculate" style="width: 100%; background-color: black;">
        </div>

        <div class="center d-flex flex-column jusitfy-content-center align-items-center">
            <div class="buttons mb-2">
            
                <div class="col">
                    <button onclick="clearInput()" class="symb">C</button>
                <button onclick="removeFromInput" class="symb">&larr;</button>
                <button onclick="addToInput('%')" class="symb">%</button>
                <button onclick="addToInput('/')">/</button>
                </div>
                <div class="col">
    
                    <button onclick="addToInput('7')" class="num">7</button>
                    <button onclick="addToInput('8')" class="num">8</button>
                    <button onclick="addToInput('9')" class="num">9</button>
                    <button onclick="addToInput('*')">X</button>
                </div>
                <div class="col">
                    <button onclick="addToInput('4')" class="num">4</button>
                    <button onclick="addToInput('5')" class="num">5</button>
                <button onclick="addToInput('6')" class="num">6</button>
                <button onclick="addToInput('-')">-</button>
            </div>
            
            <div class="col">
    
                <button onclick="addToInput('1')" class="num">1</button>
                <button onclick="addToInput('2')" class="num">2</button>
                <button onclick="addToInput('3')" class="num">3</button>
                <button onclick="addToInput('+')">+</button>
                </div>
    
    
                <div class="col">
                    <button onclick="addToInput('0')" class="num">0</button>
                <button onclick="addToInput('.')" class="num">.</button>
                <button onclick="calculate()">=</button>
                </div>
    
    
            </div>
        </div>
    </div>
    </div>

<script>
    
   let input = document.getElementById("calculate");
let numbers = [];
let operators = [];

function addToInput(value){
    let number = parseFloat(value);
    numbers.push(number);
    input.value = input.value + value;
}

function clearInput(){

    input.value = ""
}

function removeFromInput(){
    let currentValue = input.value;
    let lastChar = currentValue.slice(-1);
    input.value = input.value.slice(0,-1);


    if(lastChar === '+' || lastChar === '-' || lastChar === '*' || lastChar === '/'){
        opperators.pop();
    }else{
        let lastIndex = numbers.length -1;
        numbers[lastIndex] = parseFloat(numbers[lastIndex].toString().slice(0,-1));
        if(numbers[lastIndex] === 0){
            numbers.pop();
            operators.pop();
        }
    }

}

function calculate(){
    let expression = input.value;
    let regex = /(\d+(?:\d+)?)|([+\-*])/g;
    let match;

    let isFirstNumber= true;
    while(match = regex.exec(expression)){
        let value = match[0];
        if(value === '+' || value === '-' || value === '*' || value === '/'){
            operators.push(value);
            isFirstNumber =  true;
        }else{
            if(isFirstNumber){
                numbers.push(parseFloat(value));
                isFirstNumber = false;
            }else{
                let lastIndex = numbers.length - 1;
                let nextNumber = numbers[numbers.length - 1 - i];

                switch (operator) {
                    case '+':
                        result += nextNumber;
                        break;
                    case '-':
                        result -= nextNumber;
                        break;
                    case '*':
                        result *= nextNumber;
                        break;
                    case '/':
                        result /= nextNumber;
                        break;
                }
                i++;
            }
        }
    }

    let result = numbers[0];
    for(let i = 0; i < operators.length; i++){
        let operator = operators[i];
        let nextNumber = numbers[numbers.length - 1 - i];

        switch (operator) {
            case '+':
                result += nextNumber;
                break;
            case '-':
                result -= nextNumber;
                break;
            case '*':
                result *= nextNumber;
                break;
            case '/':
                result /= nextNumber;
                break;
        }
    }

    input.value = result;
}



</script>
</body>
</html>
